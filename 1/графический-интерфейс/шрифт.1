#!1
используется класс
  графический-интерфейс/объект
  графический-интерфейс/интерфейс-вместилище-окно
  графический-интерфейс/интерфейс-подокно
  графический-интерфейс/интерфейс-подобласть
  с-префиксом rkt: racket/gui/base
предоставлять шрифт-элемента-управления шрифт% на-основе-шрифта

внутренний-шрифта% = сформировать-код $ #` класс rkt:font%
  #,@начало-внутреннего

при-компиляции
  методы-шрифта = '
    имя() = $внутренний{get-face}
    семейство() = $внутренний{get-family}
    свойства() = $внутренний{get-feature-settings}
    идентификатор() = $внутренний{get-font-id}
    округлять-метрики?() =
      $внутренний{get-hinting} == 'aligned
    размер в-пикселях($внутренний{get-size-in-pixels}) = $внутренний{get-size в-пикселях}
    размер-в-пикселях?() = $внутренний{get-size-in-pixels}
    сглаживание() =
      сглаживание->русский $внутренний{get-smoothing}
    стиль() =
      стиль->русский $внутренний{get-style}
    подчёркнутый?() = $внутренний{get-underlined}
    насыщенность() =
      насыщенность->русский $внутренний{get-weight}
    есть-литера? литера для-заголовка?(ложь) = $внутренний{screen-glyph-exists? литера для-заголовка?}

насыщенность->английский термин =
  выбор термин
    (тонкая) 'thin
    (сверхсветлая) 'ultralight
    (светлая) 'light
    (полусветлая) 'semilight
    (книжная) 'book
    (нормальная) 'normal
    (средняя) 'medium
    (полужирная) 'semibold
    (жирная) 'bold
    (сверхжирная) 'ultrabold
    (тяжёлая) 'heavy
    (сверхтяжёлая) 'ultraheavy
    иначе термин

насыщенность->русский термин =
  выбор термин
    (thin) 'тонкая
    (ultralight) 'сверхсветлая
    (light) 'светлая
    (semilight) 'полусветлая
    (book) 'книжная
    (normal) 'нормальная
    (medium) 'средняя
    (semibold) 'полужирная
    (bold) 'жирная
    (ultrabold) 'сверхжирная
    (heavy) 'тяжёлая
    (ultraheavy) 'сверхтяжёлая
    иначе термин

стиль->английский термин =
  выбор термин
    (нормальный) 'normal
    (наклонный) 'slant
    (курсив) 'italic

стиль->русский термин =
  выбор термин
    (normal) 'нормальный
    (slant) 'наклонный
    (italic) 'курсив

сглаживание->английский термин =
  выбор термин
    (стандартное) 'default
    (частичное) 'partly-smoothed
    (полное) 'smoothed
    (отсутствует) 'unsmoothed

сглаживание->русский термин =
  выбор термин
    (default) 'стандартное
    (partly-smoothed) 'частичное
    (smoothed) 'полное
    (unsmoothed) 'отсутствует

шрифт% = сформировать-код $ #` класс объект-графического-интерфейса%
  #,@начало
  методы #,@(отобразить имя-метода методы-шрифта)
  инициализировать
    $размер(размер)()
    $семейство(семейство)()
    $имя(имя) ложь
    $стиль(стиль) 'нормальная
    $насыщенность(насыщенность) 'нормальная
    $подчёркнутый?(подчёркнутый?) ложь
    $сглаживание(сглаживание) 'стандартное
    $размер-в-пикселях?(размер-в-пикселях?) ложь
    $округлять-метрики?(округлять-метрики?) истина
    $свойства(свойства) соответствие()
  $внутренний := rkt:make-font
    #:size $размер
    #:face $имя
    #:family $семейство    
    #:style стиль->английский($стиль)
    #:weight насыщенность->английский($насыщенность)
    #:underlined? $подчёркнутый?
    #:smoothing сглаживание->английский($сглаживание)
    #:size-in-pixels? $размер-в-пикселях?
    #:hinting
      $округлять-метрики? ? 'aligned 'unaligned
    #:feature-settings $свойства
  #,@методы-шрифта

шрифт-элемента-управления = объект шрифт%
  размер rkt:normal-control-font{get-size}
  семейство rkt:normal-control-font{get-family}
  имя rkt:normal-control-font{get-face}
  стиль
    стиль->русский rkt:normal-control-font{get-style}
  насыщенность
    насыщенность->русский rkt:normal-control-font{get-weight}
  подчёркнутый? rkt:normal-control-font{get-underlined}
  сглаживание
    сглаживание->русский rkt:normal-control-font{get-smoothing}
  размер-в-пикселях? rkt:normal-control-font{get-size-in-pixels}
  округлять-метрики?
    rkt:normal-control-font{get-hinting} == 'aligned
  свойства rkt:normal-control-font{get-feature-settings}

на-основе-шрифта шрифт
  #:размер размер(шрифт{размер})
  #:семейство семейство(шрифт{семейство})
  #:имя имя(шрифт{имя})
  #:стиль стиль(шрифт{стиль})
  #:насыщенность насыщенность(шрифт{насыщенность})
  #:подчёркнутый? подчёркнутый?(шрифт{подчёркнутый?})
  #:сглаживание сглаживание(шрифт{сглаживание})
  #:размер-в-пикселях? размер-в-пикселях?(шрифт{размер-в-пикселях?})
  #:округлять-метрики? округлять-метрики?(шрифт{округлять-метрики?})
  #:свойства свойства(шрифт{свойства})
  =
  объект шрифт%
    размер размер
    имя имя
    семейство семейство
    стиль стиль
    насыщенность насыщенность
    подчёркнутый? подчёркнутый?
    сглаживание сглаживание
    размер-в-пикселях? размер-в-пикселях?
    округлять-метрики? округлять-метрики?
    свойства свойства
