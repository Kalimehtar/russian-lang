#!1
используется класс
  с-префиксом rkt: racket/gui
  графический-интерфейс/объект
  графический-интерфейс/интерфейс-область
  графический-интерфейс/интерфейс-окно
  графический-интерфейс/интерфейс-главное-окно
предоставлять главное-окно% текстовое-поле% объект область<%> окно<%> главное-окно<%> \
  кнопка% строка-меню% меню% пункт-меню% диалог%

пункт-меню<%> = интерфейс () удалить родитель удалён? восстановить

пункт-меню-с-заголовком<%> = интерфейс (пункт-меню<%>) включить заголовок строка-помощи включён

при-компиляции
  методы-пункта-меню = '
    родитель() =
      объект-адины $внутренний{get-parent}
    удалить() = $внутренний{delete}
    удалён?() = $внутренний{is-deleted?}
    восстановить() = $внутренний{restore}
  методы-пункта-меню-с-заголовком = '
    заголовок = функция-выбора
      () $внутренний{get-label}
      (новое-значение) $внутренний{set-label новое-значение}
    включить включён? = $внутренний{enable включён?}
    включён?() = $внутренний{is-enabled?}
    строка-помощи = функция-выбора
      () $внутренний{get-help-string}
      (новое-значение) $внутренний{set-help-string новое-значение}
  
  имена-методов-окна = отобразить имя-метода методы-окна
  имена-методов-главного-окна = отобразить имя-метода методы-главного-окна
    
внутренний-главного-окна% = сформировать-код $ #` класс rkt:frame%
  #,@начало-внутреннего
  переопределить #,@(отобразить имя-метода события-главного-окна)
  дополнить can-close? on-close display-changed
  #,@события-главного-окна
  display-changed() = получатель-событий{при-изменении-дисплея}
  can-close?() = получатель-событий{можно-закрыть?}
  on-close() = получатель-событий{при-закрытии}

главное-окно% = сформировать-код $ #` класс* объект% (главное-окно<%>)
  базовый-объект()
  методы внутренний #,@имена-методов-главного-окна создать-строку-состояния \
    показать-состояние
  инициализировать
    $заголовок(заголовок) ""
    $ширина(ширина) ложь
    $высота(высота) ложь
    #,@инициализация-главного-окна(истина)
  $внутренний = объект внутренний-главного-окна%
    получатель-событий этот
    label $заголовок
    width $ширина
    height $высота
    #,@внутренняя-инициализация-главного-окна
  внутренний() = $внутренний
  #,@методы-главного-окна
  создать-строку-состояния() = $внутренний{create-status-line}
  показать-состояние состояние = $внутренний{set-status-text состояние}

внутренний-диалога% = сформировать-код $ #` класс rkt:dialog%
  #,@начало-внутреннего
  переопределить #,@(отобразить имя-метода события-главного-окна)
  #,@события-главного-окна

диалог% = сформировать-код $ #` класс* объект% (главное-окно<%>)
  базовый-объект()
  методы внутренний #,@имена-методов-главного-окна
  инициализировать
    $заголовок(заголовок) ""
    $ширина(ширина) ложь
    $высота(высота) ложь
    #,@инициализация-главного-окна()
  $внутренний = объект внутренний-диалога%
    получатель-событий этот
    label $заголовок
    width $ширина
    height $высота
    #,@внутренняя-инициализация-главного-окна
  внутренний() = $внутренний
  #,@методы-главного-окна
  
внутренний-текстового-поля% = сформировать-код $ #` класс rkt:text-field%
  #,@начало-внутреннего
  переопределить #,@(отобразить имя-метода события-окна)
  #,@события-окна

текстовое-поле% = сформировать-код $ #` класс объект%
  базовый-объект()
  методы внутренний #,@(отобразить имя-метода методы-окна) значение
  инициализировать
    $родитель(родитель)()
    $заголовок(заголовок) ложь
    #,@инициализация-окна
    $значение(значение) «»
  $внутренний = объект внутренний-текстового-поля%
    получатель-событий этот
    parent $родитель{внутренний}
    label $заголовок
    init-value $значение
    #,@внутренняя-инициализация-окна
  внутренний() = $внутренний
  #,@методы-окна
  значение() = $внутренний{get-value}

внутренний-кнопки% = сформировать-код $ #` класс rkt:button%
  #,@начало-внутреннего
  переопределить #,@(отобразить имя-метода события-окна)
  #,@события-окна

кнопка% = сформировать-код $ #` класс объект%
  базовый-объект()
  методы внутренний #,@(отобразить имя-метода методы-окна)
  инициализировать
    $родитель(родитель)()
    $заголовок(заголовок) ложь
    действие $ функция (кнопка событие) пусто
    #,@инициализация-окна
  $внутренний = объект внутренний-кнопки%
    получатель-событий этот
    parent $родитель{внутренний}
    label $заголовок
    callback действие
    #,@внутренняя-инициализация-области
  внутренний() = $внутренний
  #,@методы-окна
  
строка-меню% = класс объект%
  базовый-объект()
  методы внутренний
  инициализировать
    $родитель(родитель)()
  $внутренний = объект rkt:menu-bar%
    parent $родитель{внутренний}
  внутренний() = $внутренний

внутренний-меню% = сформировать-код $ #` класс rkt:menu%
  #,@начало-внутреннего

меню% = класс объект%
  базовый-объект()
  методы внутренний
  инициализировать
    $родитель(родитель)()
    $заголовок(заголовок)()
  $внутренний = объект внутренний-меню%
    получатель-событий этот
    parent $родитель{внутренний}
    label $заголовок
  внутренний() = $внутренний

внутренний-пункт-меню% = сформировать-код $ #` класс rkt:menu-item%
  #,@начало-внутреннего

пункт-меню% = сформировать-код $ #` класс объект%
  базовый-объект()
  методы внутренний #,@(отобразить имя-метода $ методы-пункта-меню ++ методы-пункта-меню-с-заголовком)
  инициализировать
    $родитель(родитель)()
    $заголовок(заголовок)()
    действие
  $внутренний = объект внутренний-пункт-меню%
    получатель-событий этот
    parent $родитель{внутренний}
    label $заголовок
    callback действие
  внутренний() = $внутренний
  #,@методы-пункта-меню
  #,@методы-пункта-меню-с-заголовком
